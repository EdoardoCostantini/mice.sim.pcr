<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Combine estimates by Rubin's rules — pool • mice.pcr.sim</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>



<meta property="og:title" content="Combine estimates by Rubin's rules — pool" />
<meta property="og:description" content="The pool() function combines the estimates from m
repeated complete data analyses. The typical sequence of steps to
do a multiple imputation analysis is:
Impute the missing data by the mice.pcr.sim function, resulting in
a multiple imputed data set (class mids);
Fit the model of interest (scientific model) on each imputed data set
by the with() function, resulting an object of class mira;
Pool the estimates from each model into a single set of estimates
and standard errors, resulting is an object of class mipo;
Optionally, compare pooled estimates from different scientific models
by the D1() or D3() functions.
A common error is to reverse steps 2 and 3, i.e., to pool the
multiply-imputed data instead of the estimates. Doing so may severely bias
the estimates of scientific interest and yield incorrect statistical
intervals and p-values. The pool() function will detect
this case." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mice.pcr.sim</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">3.13.9</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/overview.html">Overview</a>
    </li>
    <li>
      <a href="../articles/oldfriends.html">Help for old friends</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/amices/mice.pcr.sim/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Combine estimates by Rubin's rules</h1>
    <small class="dont-index">Source: <a href='https://github.com/amices/mice.pcr.sim/blob/master/R/pool.R'><code>R/pool.R</code></a></small>
    <div class="hidden name"><code>pool.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The <code>pool()</code> function combines the estimates from <code>m</code>
repeated complete data analyses. The typical sequence of steps to
do a multiple imputation analysis is:</p><ol>
<li><p>Impute the missing data by the <code>mice.pcr.sim</code> function, resulting in
a multiple imputed data set (class <code>mids</code>);</p></li>
<li><p>Fit the model of interest (scientific model) on each imputed data set
by the <code><a href='https://rdrr.io/r/base/with.html'>with()</a></code> function, resulting an object of class <code>mira</code>;</p></li>
<li><p>Pool the estimates from each model into a single set of estimates
and standard errors, resulting is an object of class <code>mipo</code>;</p></li>
<li><p>Optionally, compare pooled estimates from different scientific models
by the <code><a href='D1.html'>D1()</a></code> or <code><a href='D3.html'>D3()</a></code> functions.</p></li>
</ol><p>A common error is to reverse steps 2 and 3, i.e., to pool the
multiply-imputed data instead of the estimates. Doing so may severely bias
the estimates of scientific interest and yield incorrect statistical
intervals and p-values. The <code>pool()</code> function will detect
this case.</p>
    </div>

    <pre class="usage"><span class='fu'>pool</span><span class='op'>(</span><span class='va'>object</span>, dfcom <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>An object of class <code>mira</code> (produced by <code><a href='with.mids.html'>with.mids()</a></code>
or <code><a href='as.mira.html'>as.mira()</a></code>), or a <code>list</code> with model fits.</p></td>
    </tr>
    <tr>
      <th>dfcom</th>
      <td><p>A positive number representing the degrees of freedom in the
complete-data analysis. Normally, this would be the number of independent
observation minus the number of fitted parameters. The default
(<code>dfcom = NULL</code>) extract this information in the following
order: 1) the component
<code>residual.df</code> returned by <code><a href='https://generics.r-lib.org/reference/glance.html'>glance()</a></code> if a <code><a href='https://generics.r-lib.org/reference/glance.html'>glance()</a></code>
function is found, 2) the result of <code>df.residual(</code> applied to
the first fitted model, and 3) as <code>999999</code>.
In the last case, the warning <code>"Large sample assumed"</code> is printed.
If the degrees of freedom is incorrect, specify the appropriate value
manually.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class <code>mipo</code>, which stands for 'multiple imputation
pooled outcome'.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The <code>pool()</code> function averages the estimates of the complete
data model, computes the
total variance over the repeated analyses by Rubin's rules
(Rubin, 1987, p. 76),
and computes the following diagnostic statistics per estimate:</p><ol>
<li><p>Relative increase in variance due to nonresponse <code>r</code>;</p></li>
<li><p>Residual degrees of freedom for hypothesis testing <code>df</code>;</p></li>
<li><p>Proportion of total variance due to missingness <code>lambda</code>;</p></li>
<li><p>Fraction of missing information <code>fmi</code>.</p></li>
</ol>

<p>The function requires the following input from each fitted model:</p><ol>
<li><p>the estimates of the model, usually obtainable by <code><a href='https://rdrr.io/r/stats/coef.html'>coef()</a></code></p></li>
<li><p>the standard error of each estimate;</p></li>
<li><p>the residual degrees of freedom of the model.</p></li>
</ol>

<p>The degrees of freedom calculation for the pooled estimates uses the
Barnard-Rubin adjustment for small samples (Barnard and Rubin, 1999).</p>
<p>The <code>pool()</code> function relies on the <code><a href='https://generics.r-lib.org/reference/tidy.html'>broom::tidy</a></code> for
extracting the parameters. Versions before <code>mice.pcr.sim 3.8.5</code> failed
when no <code><a href='https://generics.r-lib.org/reference/glance.html'>broom::glance()</a></code> function was found for extracting the
residual degrees of freedom. The <code>pool()</code> function is now
more forgiving.</p>
<p>Since <code>mice.pcr.sim 3.13.2</code> function <code>pool()</code> uses the robust
the standard error estimate for pooling when it can extract
<code>robust.se</code> from the <code><a href='https://generics.r-lib.org/reference/tidy.html'>tidy()</a></code> object.</p>
<p>In versions prior to <code>mice.pcr.sim 3.0</code> pooling required only that
<code><a href='https://rdrr.io/r/stats/coef.html'>coef()</a></code> and <code><a href='https://rdrr.io/r/stats/vcov.html'>vcov()</a></code> methods were available for fitted
objects. <em>This feature is no longer supported</em>. The reason is that <code><a href='https://rdrr.io/r/stats/vcov.html'>vcov()</a></code>
methods are inconsistent across packages, leading to buggy behaviour
of the <code>pool()</code> function.</p>
<p>Since <code>mice.pcr.sim 3.0+</code>, the <code>broom</code>
package takes care of filtering out the relevant parts of the
complete-data analysis. It may happen that you'll see the messages
like <code>Error: No tidy method for objects of class ...</code> or
<code>Error: No glance method for objects of class ...</code>. The message
means that your complete-data method used in <code><a href='https://rdrr.io/r/base/with.html'>with(imp, ...)</a></code> has
no <code>tidy</code> or <code>glance</code> method defined in the <code>broom</code> package.</p>
<p>The <code>broom.mixed</code> package contains <code>tidy</code> and <code>glance</code> methods
for mixed models. If you are using a mixed model, first run
<code><a href='http://github.com/bbolker/broom.mixed'>library(broom.mixed)</a></code> before calling <code>pool()</code>.</p>
<p>If no <code>tidy</code> or <code>glance</code> methods are defined for your analysis
tabulate the <code>m</code> parameter estimates and their variance
estimates (the square of the standard errors) from the <code>m</code> fitted
models stored in <code>fit$analyses</code>. For each parameter, run
<code><a href='pool.scalar.html'>pool.scalar</a></code> to obtain the pooled parameters estimate, its variance, the
degrees of freedom, the relative increase in variance and the fraction of missing
information.</p>
<p>An alternative is to write your own <code><a href='https://generics.r-lib.org/reference/glance.html'>glance()</a></code> and <code><a href='https://generics.r-lib.org/reference/tidy.html'>tidy()</a></code>
methods and add these to <code>broom</code> according to the specifications
given in <a href='https://broom.tidymodels.org'>https://broom.tidymodels.org</a>.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Barnard, J. and Rubin, D.B. (1999). Small sample degrees of
freedom with multiple imputation. <em>Biometrika</em>, 86, 948-955.</p>
<p>Rubin, D.B. (1987). <em>Multiple Imputation for Nonresponse in Surveys</em>.
New York: John Wiley and Sons.</p>
<p>van Buuren S and Groothuis-Oudshoorn K (2011). <code>mice.pcr.sim</code>: Multivariate
Imputation by Chained Equations in <code>R</code>. <em>Journal of Statistical
Software</em>, <b>45</b>(3), 1-67. <a href='https://www.jstatsoft.org/v45/i03/'>https://www.jstatsoft.org/v45/i03/</a></p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='with.mids.html'>with.mids</a></code>, <code><a href='as.mira.html'>as.mira</a></code>, <code><a href='pool.scalar.html'>pool.scalar</a></code>,
<code>glance</code>, <code>tidy</code>
<a href='https://github.com/amices/mice.pcr.sim/issues/142'>https://github.com/amices/mice.pcr.sim/issues/142</a>,
<a href='https://github.com/amices/mice.pcr.sim/issues/274'>https://github.com/amices/mice.pcr.sim/issues/274</a></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># pool using the classic MICE workflow</span>
<span class='va'>imp</span> <span class='op'>&lt;-</span> <span class='fu'><a href='mice.pcr.sim.html'>mice.pcr.sim</a></span><span class='op'>(</span><span class='va'>nhanes</span>, maxit <span class='op'>=</span> <span class='fl'>2</span>, m <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>
</div><div class='output co'>#&gt; 
#&gt;  iter imp variable
#&gt;   1   1  bmi  hyp  chl
#&gt;   1   2  bmi  hyp  chl
#&gt;   2   1  bmi  hyp  chl
#&gt;   2   2  bmi  hyp  chl</div><div class='input'><span class='va'>fit</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/with.html'>with</a></span><span class='op'>(</span>data <span class='op'>=</span> <span class='va'>imp</span>, exp <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span><span class='op'>(</span><span class='va'>bmi</span> <span class='op'>~</span> <span class='va'>hyp</span> <span class='op'>+</span> <span class='va'>chl</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='fu'>pool</span><span class='op'>(</span><span class='va'>fit</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt;          term    estimate  std.error statistic       df     p.value
#&gt; 1 (Intercept) 20.60793363 4.64881537 4.4329430 10.12935 0.001229288
#&gt; 2         hyp  0.21992681 1.99646262 0.1101582 19.71919 0.913397289
#&gt; 3         chl  0.02823202 0.02531475 1.1152403 11.47827 0.287552697</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Stef van Buuren, Karin Groothuis-Oudshoorn.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: '491b6c2ead7f15b8c26c513b923dd6a0',
    indexName: 'mice.pcr.sim',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


